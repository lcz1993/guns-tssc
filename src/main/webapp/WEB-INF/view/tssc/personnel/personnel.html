<html class="header-pc lang-ch">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,requiresActiveX=true" />
    <title>关于我们</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
    <meta name="google" value="notranslate" />
    <meta http-equiv="cleartype" content="on" />

    <!-- Page info metas start-->
    <meta name="description" content="">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:site_name" content="">
    <meta property="og:type" content="website">
    <meta property="article:publisher" content="">
    <meta property="article:author" content="">
    <!-- Page info metas end-->

    <link rel="shortcut icon" href="${ctxPath}/static/reception/img/logo.png"/>
    <!-- Initial header classname -->
    <script>!!(window.innerWidth <= 960) && (document.documentElement.className = document.documentElement.className.replace('header-pc', 'header-mb'));</script>
    <link rel="stylesheet" href="${ctxPath}/static/reception/css/indexom.css" />
    <link rel="stylesheet" href="${ctxPath}/static/reception/css/main.css" />
    <!-- 全局css -->
    <link rel="shortcut icon" href="${ctxPath}/static/favicon.ico">
    <link href="${ctxPath}/static/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="${ctxPath}/static/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="${ctxPath}/static/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
    <link href="${ctxPath}/static/css/plugins/validate/bootstrapValidator.min.css" rel="stylesheet">
    <link href="${ctxPath}/static/css/animate.css" rel="stylesheet">
    <link href="${ctxPath}/static/css/style.css?v=4.1.0" rel="stylesheet">
    <link href="${ctxPath}/static/css/_fstyle.css" rel="stylesheet">
    <link href="${ctxPath}/static/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="${ctxPath}/static/css/plugins/webuploader/webuploader.css" rel="stylesheet">
    <link href="${ctxPath}/static/css/plugins/ztree/zTreeStyle.css" rel="stylesheet">
    <link href="${ctxPath}/static/css/plugins/jquery-treegrid/css/jquery.treegrid.css" rel="stylesheet"/>
    <!-- 全局js -->
    <script src="${ctxPath}/static/js/jquery.min.js?v=2.1.4"></script>
    <script src="${ctxPath}/static/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="${ctxPath}/static/js/plugins/ztree/jquery.ztree.all.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/validate/bootstrapValidator.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/validate/zh_CN.js"></script>
    <script src="${ctxPath}/static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/jquery-treegrid/js/jquery.treegrid.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/jquery-treegrid/js/jquery.treegrid.bootstrap3.js"></script>
    <script src="${ctxPath}/static/js/plugins/jquery-treegrid/extension/jquery.treegrid.extension.js"></script>
    <script src="${ctxPath}/static/js/plugins/layer/layer.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/iCheck/icheck.min.js"></script>
    <script src="${ctxPath}/static/js/plugins/layer/laydate/laydate.js"></script>
    <script src="${ctxPath}/static/js/plugins/webuploader/webuploader.min.js"></script>
    <script src="${ctxPath}/static/js/common/ajax-object.js"></script>
    <script src="${ctxPath}/static/js/common/bootstrap-table-object.js"></script>
    <script src="${ctxPath}/static/js/common/tree-table-object.js"></script>
    <script src="${ctxPath}/static/js/common/web-upload-object.js"></script>
    <script src="${ctxPath}/static/js/common/ztree-object.js"></script>
    <script src="${ctxPath}/static/js/common/Feng.js"></script>

    <script type="text/javascript">
        Feng.addCtx("${ctxPath}");
        Feng.sessionTimeoutRegistry();
    </script>
</head>
<body ontouchstart="" style="background-color: #AAA">
<!--/.masthead-->
<main class="mastbody">
    <div class="mastbody-inner">
        <div class="effect-holder" data-effect="about"></div>
        <!--************************
                   #/about-leader
               ************************-->
        <div data-section="about-leader" class="section">
            <section data-mainpage="list" class="mainpage">
                <div class="page-body about-leader">
                    <div class="row-main">
                        <input type="hidden" value="${company.id}" id="company_id">
                        <div class="header" id="personnel_com">
                            <h1 class="maintitle" >${company.personnel}</h1><a onclick="editComPersonnel()">编辑</a>
                        </div>
                        <div class="content">
                            <div class="content-inner">
                                <#button name="添加人员" icon="fa-plus" clickFun="Personnel.openAddPersonnel()"/>
                                <ul class="list" id="personnel_ul">
                                    <!--员工名称职位-->
                                    @for(personnel in personnelList){
                                    <li class="item">
                                        <button type="button" class="btn btn-info" style="height: 28px;margin-right: 5px;float: left;margin-top: 10px;" onclick="delPersonnel('${personnel.id}');">删除</button>
                                        <button type="button" class="btn btn-info" style="height: 28px;margin-right: 5px;float: left;" onclick="Personnel.openPersonnelDetail('${personnel.id}');">编辑</button>
                                        <a class="name ff-loud" data-ga-event="about-leader-${personnel.id}" href="#/about-leader/${personnel.id}">${personnel.name}
                                            <i class="icn icn-inline icn-angle-right"></i></a>
                                        <ul class="titles">
                                            @for(position in personnel.positionList){
                                            <li>${position}</li>
                                            @}
                                        </ul>
                                    </li>
                                    @}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section data-mainpage="detail" class="mainpage" id="personnel_section">

                @for(personnel in personnelList){
                <section data-subpage="${personnel.id}" class="subpage">
                    <div class="page-body about-leader-detail">
                        <div class="row-side">
                            <div class="content">
                                <div class="content-mask">
                                    <div class="content-outer">
                                        <div class="content-inner">
                                            <figure class="avatar">
                                                <img src="${ctxPath}/personnel/image/${personnel.image}" />
                                            </figure>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-main">
                            <div class="header">
                                <h2 class="maintitle clr-red">${personnel.name} <span class="en">${personnel.engName}</span></h2>
                            </div>
                            <div class="content" data-scrollpane="" data-autosize="">
                                <div class="content-inner">
                                    <ul class="titles">
                                        @for(position in personnel.positionList){
                                        <li>${position}</li>
                                        @}
                                    </ul>
                                    <div class="descr htmledit">
                                        ${personnel.introduce}
                                    </div>
                                </div>
                            </div>
                            <a class="btn-close back" href="#/about-leader" title="回前页"><i class="icn icn-close"></i></a>
                        </div>
                    </div>
                </section>
                @}

                <!--职工详细信息-->
                <div class="redstripe"></div>
            </section>
        </div>
        <!--/[data-section]-->
    </div>
    <!--/.mastbody-inner-->
</main>

<div id="navDots" class="navdots">
    <div class="outer">
        <div class="inner">
            <a class="dot" href="${ctxPath}/studio"><b></b></a>
            <a class="dot" href="${ctxPath}/personnel"><b></b></a>
            <a class="dot" href="${ctxPath}/field"><b></b></a>
            <a class="dot" href="${ctxPath}/company/brand"><b></b></a>
            <a class="dot" href="${ctxPath}/company/history"><b></b></a>
            <a class="dot" href="${ctxPath}/company/social"><b></b></a>
        </div>
    </div>
</div>
<!--/.navdots-->
<script src="${ctxPath}/static/modular/tssc/personnel/personnel_info.js"></script>
<script src="${ctxPath}/static/modular/tssc/personnel/personnel.js"></script>
<script src="${ctxPath}/static/reception/jquery/jquery-3.3.1.min.js"></script>
<script src="${ctxPath}/static/reception/js/libs/plugins.js"></script>
<script src="${ctxPath}/static/reception/js/main.js"></script>
<script>

    /**
     *团队名称编辑
     */
    function editComPersonnel() {
        $("#personnel_com h1").remove();
        $("#personnel_com a").remove();
        var input = "";
        input += '<div class="input-group">';
        input += '<input type="text" class="form-control"/>';
        input += '<span class="input-group-btn">';
        input += '<button type="button" class="btn btn-primary" onclick="updateComPersonnel()">提交</button>';
        input += '</span>';
        input += '</div>';
        var $input = $(input);
        $("#personnel_com").append($input);
    }

    /**
     * 团队名称编辑提交
     */
    function updateComPersonnel() {
        var id = $("#company_id").val();
        var name = $("#personnel_com input").val();
        $.ajax({
            url:"${ctxPath}/company/update",
            type:"post",
            data:{param:"personnel="+name+"&id="+id},
            dataType:"json",
            success :function (result) {
                // result = result.data;
                // var id = result.id;
                // var name = result.name;
                // $("#company_id").text(id);
                // //删除输入框,改为h1
                // $("#personnel_com .input-group").remove();
                // var input = "";
                // input += '<h1 class="maintitle">'+name+'</h1>';
                // input += '<a onclick="editComPersonnel()">编辑</a>';
                // var $input = $(input);
                // $("#personnel_com").append($input);
                // window.location.reload();
                window.reload();
                Feng.success("提交成功");
            },
            fail:function () {
                Feng.error("提交失败！");
            }
        });
    }
    /**
     * 删除工作室
     */
    function delPersonnel(id) {
        layer.confirm("确认删除？",function () {
            $.ajax({
                url: "${ctxPath}/personnel/delete?id=" + id,
                type: "get",
                dateType:"json",
                success:function (result) {
                    result = result.data;
                    console.log(result);
                    if(result == "ok"){
                        console.log();
                        Feng.success("删除成功");
                        window.location.reload();
                    }
                },
                fail:function () {
                    Feng.error("删除失败！");
                },

                error : function () {
                    console.log("error");
                }
            });
        });

    }
</script>
</body>
</html>
